<!-- ─── Global Context Menu ────────────────────────────────────────── -->
<div class="ctx-menu" id="globalCtxMenu"></div>

<!-- ─── Global Confirm Modal ──────────────────────────────────────── -->
<div class="confirm-overlay" id="globalConfirmOverlay">
    <div class="confirm-card">
        <div class="confirm-header">
            <div class="confirm-icon accent" id="confirmIcon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/>
                    <line x1="12" y1="16" x2="12.01" y2="16"/>
                </svg>
            </div>
            <div class="confirm-title" id="confirmTitle">Are you sure?</div>
        </div>
        <div class="confirm-body" id="confirmBody">This action cannot be undone.</div>
        <div class="confirm-actions">
            <button class="btn btn-cancel" id="confirmCancelBtn">Cancel</button>
            <button class="btn btn-confirm accent" id="confirmOkBtn">Confirm</button>
        </div>
    </div>
</div>

<!-- ─── Global Snackbar (for split bot selection etc.) ────────────── -->
<div class="snackbar" id="globalSnackbar">
    <button class="snackbar-close" onclick="window._snackbar.hide()">&times;</button>
    <div class="snackbar-title" id="snackbarTitle"></div>
    <div class="snackbar-options" id="snackbarOptions"></div>
</div>

<!-- ─── Copy Toast ───────────────────────────────────────────────── -->
<div class="copy-toast" id="globalCopyToast">Copied!</div>

<!-- Socket.IO (loaded globally for user tracking) -->
<script src="/socket.io/socket.io.js"></script>

<!-- External JS -->
<script src="/public/js/dashboard.js"></script>

<!-- Socket.IO user registration -->
<script>
    if (typeof io !== 'undefined') {
        var _regSocket = io();
        // Register user for online tracking (data injected by EJS)
        <% if (typeof user !== 'undefined' && user) { %>
        _regSocket.emit('user:register', {
            discordId: '<%= user.discordId %>',
            username: '<%= user.username %>',
            globalName: '<%= user.globalName %>',
            avatarUrl: '<%= user.avatarUrl %>',
            role: '<%= user.role %>',
            currentPage: window.location.pathname
        });
        // Handle force-logout (kicked by dev)
        _regSocket.on('force-logout', function() {
            window.location.href = '/logout';
        });
        <% } %>
    }
</script>
</body>
</html>
